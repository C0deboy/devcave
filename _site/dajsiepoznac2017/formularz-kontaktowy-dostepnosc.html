<!DOCTYPE html>
<html lang="pl">
<head>
  
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Devcave - blog programisty na tematy związane z branżą IT, a szczególnie z programowaniem. Pracuję głownie z językami Java i Javascript, ale na blogu nie zabraknie tematów ogólnych ;)">
<meta name="author" content="Codeboy">
<title>Formularz kontaktowy - dostępność</title>

<link rel="canonical" href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-dostepnosc">
<link rel="shortcut icon" href="/img/logo.ico">

<link rel="stylesheet" href="/dist/css/libs/bootstrap.min.css">
<link rel="stylesheet" href="/dist/css/libs/bootstrap-xlgrid.min.css">
<link rel="stylesheet" href="/dist/css/devcave.min.css">
<link rel="stylesheet" href="/dist/css/syntax.min.css">
<link rel="stylesheet" href="/dist/css/libs/font-awesome.min.css">

<link href="//fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link type="application/atom+xml" rel="alternate" href="https://devcave.pl/feed.xml" title="devcave.pl" />

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-custom">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/"><img src="/img/devcave.png" alt="logo"> devcave.pl</a>

            <button type="button" id="navbar-toggle-btn" class="navbar-toggle" data-toggle="collapse" data-target="#site-nav" aria-expanded="false" aria-controls="site-nav">
                Menu
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
        </div>

        <nav id="site-nav" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="nav-el" href="/o-mnie/">O mnie</a>
                </li>

                <li>
                    <a class="nav-el" href="/archiwum/">Archiwum</a>
                </li>

                <li>
                    <a class="nav-el" href="/kontakt/">Kontakt</a>
                </li>
                <li>
                    <a class="nav-el books-btn" href="/moja-biblioteka">Moja biblioteka</a>
                </li>
                <li>
                    <a class="nav-el" href="/moje-projekty">Moje projekty</a>
                </li>
                <li>
                    <button class="dark-mode-btn nav-el" data-toggle="tooltip" data-placement="bottom" title="Zmień motyw">
                        <i class="fa fa-sun-o" aria-hidden="true"></i>/<i class="fa fa-moon-o" aria-hidden="true"></i>
                    </button>
                </li>
            </ul>
        </nav>
    </div>
</div>


<article>

  <div class="container post">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

        <header class="post-header">
          <div class="post-heading">

            <h1 class="post-title">Dodajemy formularz kontaktowy 4#</h1>
            
            <h2 class="post-subtitle">Poprawiamy dostępność formularza</h2>
            
            <p class="post-meta">
              
              30
              marca
              
              2017</p>
            
            <div class="site-tag"><a href='/archiwum#dajsiepoznac2017'>DajSiePoznac2017</a></div>
            
          </div>

          <hr>
        </header>

        
        <nav class="table-of-contents">
          <p class="m0">Spis treści:</p>
          <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#dostępność">Dostępność</a>
<ul>
<li class="toc-entry toc-h2"><a href="#użytkownik-bez-javascript-u">Użytkownik bez Javascript-u</a></li>
</ul>
</li>
</ul>

          <hr>
        </nav>
        

        <p><u>W tym poście zajmuję się dostępnością formularza.</u></p>

<p>Jeśli trafiłeś tu bezpośrednio, zajrzyj do <a href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-HTML-JS">pierwszego postu</a>, gdzie opisuję założenia i tworzę podstawową strukturę formularza.</p>

<hX>Wpisy w tej serii:</hX>
<ol>
  <li><a href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-HTML-JS">HTML + otwieranie / zamykanie JQuery</a></li>
  <li><a href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-walidacja-ajax">Walidacja HTML5/JS + AJAX</a></li>
  <li><a href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-php-swiftmailer">Walidacja PHP + Swiftmailer</a></li>
  <li><a href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-dostepnosc">Dostępność formularza</a></li>
  <li><a href="https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-refaktoryzacja">Zrefaktoryzowana wersja + Github</a></li>
</ol>

<h1 id="dostępność">Dostępność</h1>

<p>Co to jest i dlaczego jest to ważne pisałem już <a href="https://devcave.pl/dajsiepoznac2017/dostepnosc-strony-wprowadzenie">wcześniej</a>.</p>

<p>W kodzie, który stworzyliśmy, mamy już dwa elementy, które wpływają na dostępność. Mowa o:</p>

<ul>
  <li><code class="highlight">&lt;<span class="nt">label</span>&gt;</code> - (#musthave) etykieta sprawia, że w większości przypadków, gdy klikniemy na tekst opisujący pole, automatycznie nas do niego przeniesie. Ponadto czytnik ekranowy opisze to pole po uzyskaniu focusu.</li>
  <li><code class="highlight"><span class="na">placeholder=</span><span class="s">"wartość"</span></code> - ten atrybut przeważnie też zostanie odczytane przez czytnik ekranowy.</li>
</ul>

<p>Jest to jednak niewiele. Mamy jeszcze sporo do dodania. Zacznijmy od całego formularza.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"contact"</span> <span class="na">class=</span><span class="s">"contact"</span> <span class="na">role=</span><span class="s">"dialog"</span> <span class="na">aria-label=</span><span class="s">"Formularz kontaktowy"</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!--Wnętrze formularza--&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<ul>
  <li><code class="highlight"><span class="na">role=</span><span class="s">"dialog"</span></code> - w naszym przypadku formularz to odseparowane od reszty strony okienko i właśnie rola “dialog” odpowiada takim elementom strony. Dzięki temu czytnik ekranowy poinformuje użytkownika, że otwiera okno dialogowe, które jest odseparowane od reszty strony.</li>
  <li><code class="highlight"><span class="na">aria-label=</span><span class="s">"opis"</span></code> - opis, który zostanie odczytany przez technologie wspomagające.</li>
  <li><code class="highlight"><span class="na">aria-hidden=</span><span class="s">"true"</span></code> - nasz formularz początkowo jest ukryty. Ten atrybut sprawia, że pozostanie także niewidoczny dla czytników ekranowych. Będziemy zmieniać to pole dynamicznie podczas otwierania/zamykania.</li>
</ul>

<p>Nasze wnętrze formularza również potrzebuje dodatkowych atrybutów:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"emailForm"</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"emailform.php"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label&gt;</span>
      Twój email
      <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"from"</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">placeholder=</span><span class="s">"Wpisz tu twój email"</span> <span class="na">required</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;label&gt;</span>
      Temat
      <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"subject"</span> <span class="na">placeholder=</span><span class="s">"Wpisz tu temat wiadomości"</span> <span class="na">required</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inp-message"</span><span class="nt">&gt;</span>
      Treść
    <span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"message"</span> <span class="na">id=</span><span class="s">"inp-message"</span> <span class="na">placeholder=</span><span class="s">"Wpisz tu twoją wiadomość"</span> <span class="na">required</span><span class="nt">&gt;&lt;/textarea&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"g-recaptcha"</span> <span class="na">data-sitekey=</span><span class="s">"6Lc9_xMUAAAAAFPVNhvDKb9lMXHGI4o7-zhqkTgL"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"emailFormSubmit"</span> <span class="na">name=</span><span class="s">"submit"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Wyślij<span class="nt">&lt;/button&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"emailFormAlert"</span> <span class="na">aria-live=</span><span class="s">"polite"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">id=</span><span class="s">"close-contact-btn"</span> <span class="na">class=</span><span class="s">"close-btn"</span> <span class="na">aria-label=</span><span class="s">"Zamknij formularz kontaktowy"</span> <span class="na">title=</span><span class="s">"Zamknij formularz kontaktowy"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-times close-form"</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;&lt;/i&gt;</span>
  <span class="nt">&lt;/button&gt;</span></code></pre></figure>

<ul>
  <li><code class="highlight"><span class="na">aria-live=</span><span class="s">"polite"</span></code> - użytkownik, który używa czytnik ekranowy, nie ma pojęcia o kumunikatach, które generujemy. Dzięki temu problem jest rozwiązany. Jest to niezwykle ważny atrybut, gdy tworzymy elementy, które pojawiają sie dynamicznie bez przeładowania strony.</li>
  <li><code class="highlight"><span class="na">title=</span><span class="s">"Opis"</span></code> - dzięki temu gdy najedziemy na przycisk zamknięcia, wyświetlony zostanie opis, który informuje za co element jest odpowiedzialny. Również zostanie to przeczytane przez czytnik ekranowy. Bez tego użytkownik z niego korzystający nie miałby pojęcia, od czego jest ten przycisk.</li>
</ul>

<p>Role=”dialog” oraz to, że stworzyliśmy okno dialogowe, zobowiązuje nas do dodania jeszcze kilku kluczowych funkcjonalności:</p>
<ul>
  <li>“Zapętlenie focusu” - czyli np. podczas “tabowania” (użytkownicy konsol, tv, czy zdani na klawiatury, którzy nawigują za pomocą “focusu”) nie jest możliwe wyjście poza aktualne okno, czyli:
    <ul>
      <li>Gdy osiągniemy ostatni element (w tym wypadku przycisk zamknięcia) następny jest pierwszy element w oknie</li>
      <li>Gdy z pierwszego elementu będziemy chcieli cofnąć się kombinacją Shift+tab przeskoczy do ostatniego elementu</li>
    </ul>
  </li>
  <li>Klawisz ESC - umożliwia zamknięcie formularza</li>
  <li>Gdy okno jest otwierane “focus” dostaje pierwszy element</li>
  <li>Gdy okno jest zamykane “focus” uzyskuje przycisk, który je otworzył</li>
</ul>

<p>Zrealizujmy to:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="kd">const</span> <span class="nx">firstInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'input[name="from"]'</span><span class="p">);</span>

  <span class="nx">closeContactBtn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keydown'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">((</span><span class="nx">e</span><span class="p">.</span><span class="nx">which</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">))</span> <span class="p">{</span><span class="c1">//tab
</span>
       <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
       <span class="nx">firstInput</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
   <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">firstInput</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keydown'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">e</span><span class="p">.</span><span class="nx">which</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">))</span> <span class="p">{</span><span class="c1">//shift+tab
</span>
          <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
          <span class="nx">closeContactBtn</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
      <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">contactForm</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keydown'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">e</span><span class="p">.</span><span class="nx">which</span> <span class="o">===</span> <span class="mi">27</span><span class="p">))</span> <span class="p">{</span><span class="c1">//esc
</span>
          <span class="nx">toggleContactForm</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="p">}</span>
  <span class="p">});</span></code></pre></figure>

<p>Zauważ, że aby to zrobić konieczne jest zatrzymanie domyślnego zachowania - <code class="highlight language-javascript" data-lang="javascript"><span class="nx">preventDefault</span><span class="p">();</span></code></p>

<h2 id="użytkownik-bez-javascript-u">Użytkownik bez Javascript-u</h2>

<p><u>Traktowałbym to raczej jako ciekawostkę, gdyż obecnie strony głównie opierają się na Javascripcie, w tym [moja](https://jaki-jezyk-programowania.pl/) jest od niego uzależniona. Nie potrafię sobie wyobrazić, że ktoś w dzisiejszych czasach nie ma w przeglądarce Javascriptu. Ponadto nasz formularz wykorzystuje reCAPTCHE, która bez JS-a się nie obejdzie. Nie widzę sensu w dbaniu o użytkowników bez JS-a w takim wypadku. Mimo wszystko z punktu widzenia dostępności powinno się to robić.</u></p>

<p>Gdybyśmy w jakiś sposób zastąpili reCAPTCHE, możliwe jest, aby osoby, które nie używają Javascriptu nadal były w stanie korzystać z formularza.</p>

<p class="note">
Możesz to przetestować wyłączając Javascript w przeglądarce. W Chrome to: Opcje -&gt; Ustawienia -&gt; Pokaż ustawienia zaawansowane -&gt; W sekcji Prywatność -&gt; Ustawienia Treści -&gt; Sekcja Javascript lub szybciej, można kliknąć kłodkę obok adresu URL, gdzie znajdziemy tą opcję. Zauważ, że użytkownik bez JS utraci też na dynamicznie generowanych komunikatach i zostanie odniesiony bezpośrednio do pliku <span class="file">emailform.php</span>. Również wykona się domyślna walidacja HTML5. Wcześniej te działania zatrzymaliśmy za pomocą <code class="highlight language-javascript" data-lang="javascript"><span class="nx">preventDefault</span><span class="p">();</span></code>
</p>

<p>Polega to na tym, aby formularz wstępnie nie był schowany (display: none), tylko, żeby robił to JS. W efekcie użytkownik bez JS-a zobaczy od razu formularz na widoku i będzie w stanie go użyć. Stworzymy więc sobie klasę pomocniczą, którą później usuniemy JS-em:</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.contact-nojs</span><span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="nl">transform</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>no i usunięcie zaraz po odwołaniu do elementu:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="c1">//...
</span>
  <span class="kd">const</span> <span class="nx">contactForm</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#contact'</span><span class="p">);</span>
  <span class="nx">contactForm</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"contact-nojs"</span><span class="p">);</span>
  <span class="c1">//...</span></code></pre></figure>

<p>Cały kod i efekt końcowy (Spróbuj przejechać się klawiszami i czytnikiem ekranowym po formularzu, aby sprawdzić efekty):</p>

<script async="" src="//jsfiddle.net/C0deboy/0pju8nt1/embed/result,html,js,css/dark/"></script>



        <hr>

        <ul class="pager">
          
          <li class="previous">
            <a class="box-effect" href="/dajsiepoznac2017/formularz-kontaktowy-php-swiftmailer"
               data-toggle="tooltip" data-placement="top" title="Dodajemy formularz kontaktowy 3#"><i class="fa fa-arrow-left"
                                                                                             aria-hidden="true"></i>
              Poprzedni post</a>
          </li>
          
          
          <li class="next">
            <a class="box-effect" href="/dajsiepoznac2017/jekyll-filtrowanie-danych-localhost"
               data-toggle="tooltip" data-placement="top" title="Wykluczamy ruch z localhost w Google Analitics">Następny post <i
              class="fa fa-arrow-right" aria-hidden="true"></i></a>
          </li>
          
        </ul>

      </div>
    </div>
  </div>

</article>

<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      <div class="text-center">
  <p class="text-center">Polub stronę bloga na Facebooku. Wrzucam tam m.in. informacje o nowych wpisach:</p>

  <div class="fb-page inline box-effect">
    <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fdevcavepl&tabs&width=340&height=130&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=false&appId"></iframe>
  </div>
</div>

      <hr>

      

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = "https://devcave.pl/dajsiepoznac2017/formularz-kontaktowy-dostepnosc";
this.page.identifier = "/dajsiepoznac2017/formularz-kontaktowy-dostepnosc";
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://jaki-jezyk-programowania.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Włacz JavaScript w twojej przeglądarce, aby zobaczyć <a href="https://disqus.com/?ref_noscript"> komentarze by Disqus.</a></noscript>



    </div>
  </div>
</div>

<hr>

<script src="/promocje/promotions.js"></script>



<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center social-buttons">
                    <li>
                        <a class="main-btn" href="/feed.xml" data-toggle="tooltip" data-placement="top" title="RSS">
                            <i class="fa fa-rss fa-lg"></i>
                        </a>
                    </li>
                    <li>
                        <a class="main-btn" href="https://www.linkedin.com/in/marcin-lasota/" data-toggle="tooltip" data-placement="top" title="LinkedIn">
                            <i class="fa fa-linkedin-square" aria-hidden="true"></i>
                        </a>
                    </li>
                    <li>
                        <a class="main-btn" href="https://github.com/C0deboy" data-toggle="tooltip" data-placement="top" title="Github">
                            <i class="fa fa-github fa-lg"></i>
                        </a>
                    </li>
                    <li>
                        <a class="main-btn" href="mailto:lasota.marcinm@gmail.com" data-toggle="tooltip" data-placement="top" title="lasota.marcinm@gmail.com">
                            <i class="fa fa-envelope fa-lg"></i>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright &copy; devcave 2017 - 2018</p>
            </div>
        </div>
    </div>
</footer>


<script src="/dist/js/libs/jquery.min.js"></script>

<script src="/dist/js/libs/bootstrap.min.js"></script>

<script src="/dist/js/devcave.min.js"></script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90973428-2', 'auto');
  ga('send', 'pageview');

</script>




</body>

</html>
