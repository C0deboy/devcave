"use strict";function RecaptchaClearMsg(){document.querySelector(".g-recaptcha").focus()}$(function(){function e(e){if("boolean"!=typeof e)throw new TypeError("State must be a boolean");if(!0===e)c.fadeIn(),c.attr("aria-hidden","false"),f.focus();else{c.fadeOut(),c.attr("aria-hidden","true");for(var t in r)r[t].value="";grecaptcha.reset(),l.focus()}}function t(){var e=!0;for(var t in r){var o=r[t].parentElement.innerText;if(!0===r[t].validity.valueMissing)n(r[t],i.empty(o.toLowerCase()));else if(!0===r[t].validity.tooShort){var c=r[t].getAttribute("minlength");n(r[t],i.tooShort(o.toLowerCase(),c))}else if(!0===r[t].validity.tooLong){var s=r[t].getAttribute("maxlength");n(r[t],i.tooLong(o.toLowerCase(),s))}else!0===r[t].validity.typeMismatch&&n(r[t],i.type(o.toLowerCase()));!1===r[t].validity.valid&&(e=!1)}return 0===grecaptcha.getResponse().length&&(n(a,i.recaptcha),e=!1),e}function n(e,t){if(!e.classList.contains("wrongInput")){var n=document.createElement("p");n.classList.add("error"),n.classList.add("wrongInput"),n.textContent=t,e.parentElement.append(n),e.classList.add("wrongInput"),e.addEventListener("focus",o)}}function o(){this.classList.remove("wrongInput"),this.parentElement.removeChild(this.parentElement.getElementsByClassName("error")[0]),s.innerHTML=""}var r={};document.querySelectorAll(".form-data").forEach(function(e){r[e.getAttribute("name")]=e});var a=document.querySelector(".g-recaptcha"),i={tooShort:function(e,t){return"Pole "+e+" musi zawierać co najmniej "+t+" znaki."},tooLong:function(e,t){return"Pole "+e+" może zawierać co najwyżej "+t+" znaków."},empty:function(e){return"Pole "+e+" nie może być puste."},type:function(e){return"Pole "+e+" jest niepoprawne."},errorsInForm:"W formularzu występują błędy.",recaptcha:"Potwierdź, że nie jesteś robotem."},c=$("#formularz-kontaktowy"),s=document.querySelector(".emailFormAlert"),u=$("#close-contact-btn"),l=$("#open-contact-btn");l.click(function(){e(!0)}),u.click(function(){e(!1)});var f=$(".form-data:first");"#formularz-kontaktowy"===document.location.hash&&(l.focus(),l.click()),u.on("keydown",function(e){9!==e.which||e.shiftKey||(e.preventDefault(),f.focus())}),f.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),u.focus())}),c.on("keydown",function(t){27===t.which&&e(!1)}),$(".emailFormSubmit").click(function(e){if(s.innerHTML='<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>',e.preventDefault(),!0===t()){var n={"g-recaptcha-response":grecaptcha.getResponse()};grecaptcha.reset();for(var o in r)n[o]=r[o].value;var a=$.ajax({type:"POST",url:document.querySelector(".emailForm").getAttribute("action"),dataType:"json",data:n});a.fail(function(e){console.log(e),s.innerHTML=i.errorsInForm}),a.done(function(e){console.log(e),s.innerHTML="Wysłano! Dzięki za wiadomość!"})}else s.innerHTML=i.errorsInForm}),window.recaptchaClearErr=function(){document.querySelector(".g-recaptcha").focus()}});