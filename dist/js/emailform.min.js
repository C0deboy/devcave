"use strict";function toggleContactForm(t){if("boolean"!=typeof t)throw new TypeError("State must be a boolean");if(!0===t)contactForm.fadeIn(),contactForm.attr("aria-hidden","false"),firstInput.focus();else{contactForm.fadeOut(),contactForm.attr("aria-hidden","true");for(var e in formDataElements)formDataElements[e].value="";grecaptcha.reset(),openContactBtn.focus()}}function validateEmailForm(){var t=!0;for(var e in formDataElements){var o=formDataElements[e].parentElement.innerText;if(!0===formDataElements[e].validity.valueMissing)markWrongInput(formDataElements[e],customErrors.empty(o));else if(!0===formDataElements[e].validity.tooShort){var r=formDataElements[e].getAttribute("minlength");markWrongInput(formDataElements[e],customErrors.tooShort(o,r))}else if(!0===formDataElements[e].validity.tooLong){var n=formDataElements[e].getAttribute("maxlength");markWrongInput(formDataElements[e],customErrors.tooLong(o,n))}else!0===formDataElements[e].validity.typeMismatch&&markWrongInput(formDataElements[e],customErrors.type(o));!1===formDataElements[e].validity.valid&&(t=!1)}return 0===grecaptcha.getResponse().length&&(markWrongInput(recaptcha,customErrors.recaptcha),t=!1),t}function markWrongInput(t,e){if(!t.classList.contains("wrongInput")){var o=document.createElement("p");o.classList.add("error"),o.classList.add("wrongInput"),o.textContent=e,t.parentElement.append(o),t.classList.add("wrongInput"),t.addEventListener("focus",clearErrors)}}function clearErrors(){this.classList.remove("wrongInput"),this.parentElement.removeChild(this.parentElement.getElementsByClassName("error")[0]),formAlert.innerHTML=""}var formDataElements={},inputs=document.querySelectorAll(".form-data");inputs.forEach(function(t){formDataElements[t.getAttribute("name")]=t});var recaptcha=document.querySelector(".g-recaptcha"),customErrors={tooShort:function(t,e){return"Pole "+t+" musi zawierać co najmniej "+e+" znaki!"},tooLong:function(t,e){return"Pole "+t+" może zawierać co najwyżej "+e+" znaków!"},empty:function(t){return"Pole "+t+" nie może być puste!"},type:function(t){return"Pole "+t+" jest niepoprawne!"},errorsInForm:"W formularzu występują błędy!",recaptcha:"Potwierdź, że nie jesteś robotem!"},contactForm=$("#formularz-kontaktowy"),formAlert=document.querySelector(".emailFormAlert"),closeContactBtn=$("#close-contact-btn"),openContactBtn=$("#open-contact-btn");openContactBtn.click(function(){toggleContactForm(!0)}),closeContactBtn.click(function(){toggleContactForm(!1)});var firstInput=$(".form-data:first");"#formularz-kontaktowy"===document.location.hash&&(openContactBtn.focus(),openContactBtn.click()),closeContactBtn.on("keydown",function(t){9!==t.which||t.shiftKey||(t.preventDefault(),firstInput.focus())}),firstInput.on("keydown",function(t){9===t.which&&t.shiftKey&&(t.preventDefault(),closeContactBtn.focus())}),contactForm.on("keydown",function(t){27===t.which&&toggleContactForm(!1)}),$(".emailFormSubmit").click(function(t){if(formAlert.innerHTML='<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>',t.preventDefault(),!0===validateEmailForm()){var e={"g-recaptcha-response":grecaptcha.getResponse()};grecaptcha.reset();for(var o in formDataElements)e[o]=formDataElements[o].value;var r=$.ajax({type:"POST",url:"//formspree.io/lasota.marcinm@gmail.com",dataType:"json",data:e});r.fail(function(t){console.log(t),formAlert.innerHTML=customErrors.errorsInForm}),r.done(function(t){console.log(t),formAlert.innerHTML="Wysłano! Dzięki za wiadomość!"})}else formAlert.innerHTML=customErrors.errorsInForm}),window.recaptchaClearErr=function(){document.querySelector(".g-recaptcha").focus()};