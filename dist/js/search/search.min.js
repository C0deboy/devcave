!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=7)}({7:function(e,t){function s(e){const t=window.location.search.substring(1).split("&");for(let s=0;s<t.length;s++){const i=t[s].split("=");if(i[0]===e)return decodeURIComponent(i[1].replace(/\+/g,"%20"))}}const i=new class{constructor(e,t,s){this.dataSource=e,this.searchField=document.querySelector(t),this.resultsList=document.querySelector(s),this.displayResults=this.displayResults.bind(this)}fetchedData(){return fetch(this.dataSource).then(e=>e.json())}async findResults(){this.resultsList.innerHTML='<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>';const e=this.searchField.value.trim().replace(/\s/g," | "),t=new RegExp(e,"gi");return(await this.fetchedData()).filter(e=>e.titleSEO?e.title.match(t)||e.subtitle.match(t)||e.titleSEO.match(t):e.title.match(t)||e.subtitle.match(t))}async displayResults(){const e=await this.findResults(),t=e.map(e=>`<li class="result">\n            <div class="post-preview">\n              <a href="${e.url}">\n                <h2 class="post-title">${e.title}</h2>\n                <h3 class="post-subtitle">${e.subtitle}</h3>\n              </a>\n      \n              <p class="post-meta">${e.date}</p>\n            </div>\n        </li>`).join("");0===e.length||""===this.searchField.value?this.resultsList.innerHTML="<p>Nic nie znaleziono</p>":this.resultsList.innerHTML=t}init(){this.searchField.addEventListener("keyup",this.displayResults),this.searchField.addEventListener("keypress",e=>{13===e.keyCode&&e.preventDefault()})}getUrlSearchQuery(){const e=s("szukaj");if(void 0!==s("nowadomena")){const t=document.createElement("p");t.innerText="Blog został przeniesiony na nową domenę. Czy szukałeś: ?",t.classList.add("new-domain-msg"),this.resultsList.parentElement.insertBefore(t,this.resultsList),e.replace(/\d/g,"")}if(void 0!==e)this.searchField.value=e.split(/[/\-_]/).filter(e=>e.match(/\w{3,}/)).join(" "),this.displayResults();else if("/archiwum/"!==window.location.pathname){const e=window.location.href,t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=(s=>{if(404===t.status){const t=e.substr(e.lastIndexOf("/")+1);this.searchField.value=t.replace(/-/g," "),this.displayResults()}}),t.send()}}}("/dist/js/search/search.json",".search-value",".search-results");i.init(),i.getUrlSearchQuery()}});
//# sourceMappingURL=search.min.js.map