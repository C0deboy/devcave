!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t){function s(e){const t=window.location.search.substring(1).split("&");for(let s=0;s<t.length;s++){const n=t[s].split("=");if(n[0]===e)return decodeURIComponent(n[1].replace(/\+/g,"%20"))}}function n(e){const t=new RegExp("[ąćęłńóśźż]","g"),s={};for(let e=0;e<"ąćęłńóśźż".length;e++)s["ąćęłńóśźż"[e]]="acelnoszz"[e];return e.replace(t,e=>s[e]||e)}const i=new class{constructor(e,t,s){this.dataSource=e,this.searchField=document.querySelector(t),this.resultsList=document.querySelector(s),this.displayResults=this.displayResults.bind(this)}fetchedData(){return fetch(this.dataSource).then(e=>e.json())}async findResults(){this.resultsList.innerHTML='<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>';const e=this.searchField.value.trim(),t=new RegExp(".*("+e.replace(/\s/g,").*(")+").*","i"),s=new RegExp("(^|\\s)"+e.replace(/\s\w{1,2}\s/g," ").replace(/\s/g," | ")+"(\\s|$)","i"),i=await this.fetchedData(),r=i.filter(e=>n(e.title+" "+e.subtitle).match(t));return r.length>0?r:i.filter(e=>{const t=n(e.title+" "+e.subtitle);return t.match(s)?(console.log(t),!0):t.match(s)})}async displayResults(){const e=await this.findResults(),t=e.map(e=>`<li class="result">\n            <div class="post-preview">\n              <a href="${e.url}">\n                <h2 class="post-title">${e.title}</h2>\n                <h3 class="post-subtitle">${e.subtitle}</h3>\n              </a>\n      \n              <p class="post-meta">${e.date}</p>\n            </div>\n        </li>`).join("");0===e.length||""===this.searchField.value?this.resultsList.innerHTML="<p>Nic nie znaleziono</p>":this.resultsList.innerHTML=t}init(){this.searchField.addEventListener("keyup",this.displayResults),this.searchField.addEventListener("keypress",e=>{13===e.keyCode&&e.preventDefault()})}getUrlSearchQuery(){let e=s("szukaj");if(void 0!==s("nowadomena")){const t=document.createElement("p");t.innerText="Blog został przeniesiony na nową domenę. Czy szukałeś tego?:",t.classList.add("not-found-msg"),this.resultsList.parentElement.insertBefore(t,this.resultsList),e=e.replace(/\d/g,"").substr(e.lastIndexOf("/")+1)}if(void 0!==e)this.searchField.value=e.replace(/[\/\-_]/g," "),this.displayResults();else if("/archiwum/"!==window.location.pathname){const e=window.location.href,t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=(s=>{if(404===t.status){const t=e.substr(e.lastIndexOf("/")+1);this.searchField.value=t.replace(/-/g," "),this.displayResults()}}),t.send()}}}("/dist/js/search/search.json",".search-value",".search-results");i.init(),i.getUrlSearchQuery()}]);
//# sourceMappingURL=search.min.js.map