<!DOCTYPE html>
<html lang="pl">
<head>
  
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Devcave - blog programisty na tematy związane z branżą IT, a szczególnie z programowaniem w Javie.">
<meta name="author" content="Codeboy">

<meta property="fb:pages" content="2221389098088691">
<meta property="og:title" content="Enumy">
<meta property="og:description" content="Kilka dobrych praktyk">

<title>Enumy - kilka dobrych praktyk</title>

<link rel="canonical" href="https://devcave.pl/effective-java/enums">
<link rel="shortcut icon" href="/img/devcave/logo.ico">


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-90973428-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-90973428-2');
</script>



<link rel="stylesheet" href="/dist/css/devcave.min.css">

<link href="//fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
<link href='//fonts.googleapis.com/css?family=Open+Sans:300,600,800' rel='stylesheet' type='text/css'>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link type="application/atom+xml" rel="alternate" href="https://devcave.pl/feed.xml" title="devcave.pl" />

</head>

<body>

<div class="navbar navbar-expand-lg navbar-light navbar-fixed-top navbar-custom">

    <a class="navbar-brand" href="/"><img src="/img/devcave/devcave.png" alt="logo"> devcave.pl</a>

    <button type="button" id="navbar-toggle-btn" class="navbar-toggler" data-toggle="collapse"
            data-target="#site-nav" aria-expanded="false" aria-controls="site-nav">

        Menu <i class="fa fa-bars" aria-hidden="true"></i>
    </button>

    <nav id="site-nav" class="collapse navbar-collapse">
        <ul class="nav navbar-nav ml-auto text-right">
            <li class="nav-item">
                <a class="nav-link" href="/o-mnie">O mnie</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/kontakt">Kontakt</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/archiwum">Archiwum</a>
            </li>
            <li class="nav-item">
                <a class="nav-link books-btn" href="/moja-biblioteka">Moja biblioteka</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/moje-projekty">Moje projekty</a>
            </li>
            <li class="nav-item">
                <button class="dark-mode-btn nav-link" data-toggle="tooltip" data-placement="bottom"
                        title="Zmień motyw">
                    <i class="fa fa-sun-o" aria-hidden="true"></i>/<i class="fa fa-moon-o" aria-hidden="true"></i>
                </button>
            </li>
        </ul>
    </nav>
</div>


<article>

  <div class="container post">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

        <header class="post-header">
          <div class="post-heading">

            <h1 class="post-title">Enumy</h1>
            
            <h2 class="post-subtitle">Kilka dobrych praktyk</h2>
            
            <p class="post-meta">
              
              3
              listopada
              
              2018</p>
            <div class="tags">
              <div class="site-tag"><a href='/archiwum#dobre-praktyki'>Dobre-praktyki</a></div>
              
              <div class="site-tag"><a href='/archiwum#effective-java'>Effective-Java</a></div>
              
              <div class="site-tag"><a href='/archiwum#java'>Java</a></div>
              
              <div class="site-tag"><a href='/archiwum#notatnik-juniora'>Notatnik-Juniora</a></div>
              
            </div>

          </div>

          <hr>
        </header>

        
        <nav class="table-of-contents">
          <p class="m-0">Spis treści:</p>
          <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#enumy-zamiast-stałych-typu-int">Enumy zamiast stałych typu int</a></li>
<li class="toc-entry toc-h1"><a href="#pola-instancji-enuma-zamiast-polegania-na-kolejności-zadeklarowania-stałych">Pola instancji enuma zamiast polegania na kolejności zadeklarowania stałych</a></li>
<li class="toc-entry toc-h1"><a href="#enumset-zamiast-pól-bitowych">EnumSet zamiast pól bitowych</a></li>
<li class="toc-entry toc-h1"><a href="#enummap-zamiast-indexowania-metodą-ordinal">EnumMap zamiast indexowania metodą ordinal</a></li>
<li class="toc-entry toc-h1"><a href="#emuluowanie-rozszerzalnych-enumów-za-pomocą-interfejsów">Emuluowanie rozszerzalnych enumów za pomocą interfejsów</a></li>
</ul>

          <hr>
        </nav>
        

        <p class="note">
  Ten wpis jest częścią serii (nowy wpis co sobotę), w której tworzę wpisy w formie notatki z wybranego tematu z książki Effective Java (3rd edition 2018), której autorem jest Joshua Bloch. Jest to uaktualnione wydanie pod Jave 9 jednej z najlepszych książek o Javie. Nie ograniczam się jednak tylko do książki, więc czasem temat będzie rozbudowany i trafią się informacje z innych źródeł na ten sam temat.
</p>

<p>Ten wpis nawiązuje do tematu z <i>Item 34, 35, 36, 37, 38</i> z rozdziału 6:</p>

<p class="m-0">Enums and Annotations</p>

<ul class="fa-ul custom"><li style="list-style-type: none;">
                    <a href="/effective-java/enums">
                        <i class="fa-li fa fa-arrow-right"></i>Item 34: Use enums instead of int constants
                    </a>
                </li><li style="list-style-type: none;">
                    <a href="/effective-java/enums">
                        <i class="fa-li fa fa-arrow-right"></i>Item 35: Use instance fields instead of ordinals
                    </a>
                </li><li style="list-style-type: none;">
                    <a href="/effective-java/enums">
                        <i class="fa-li fa fa-arrow-right"></i>Item 36: Use EnumSet instead of bit fields
                    </a>
                </li><li style="list-style-type: none;">
                    <a href="/effective-java/enums">
                        <i class="fa-li fa fa-arrow-right"></i>Item 37: Use EnumMap instead of ordinal indexing
                    </a>
                </li><li style="list-style-type: none;">
                    <a href="/effective-java/enums">
                        <i class="fa-li fa fa-arrow-right"></i>Item 38: Emulate extensible enums with interfaces
                    </a>
                </li><li>
                <a href="/effective-java/annotations">Item 39: Prefer annotations to naming patterns
                </a>
            </li><li>
                <a href="/effective-java/annotations">Item 40: Consistently use the Override annotation
                </a>
            </li><li>
                <a href="/effective-java/annotations">Item 41: Use marker interfaces to define types
                </a>
            </li></ul>
<hr />

<p>Ten rozdział zawiera rady dotyczące używania enumów i adnotacji.</p>

<p>Na początku myślałem, że pominę ten rozdział jako że nie wnosi zbyt dużo, ale część porad jest przydatna, dlatego uznałem, że wyciągnę najważniejsze informacje z każdego tematu i podzielę to na 2 posty - o enumach i adnotacjach. Zacznijmy więc enumów:</p>

<h1 id="enumy-zamiast-stałych-typu-int">Enumy zamiast stałych typu int</h1>

<p>Typ enum reprezentuje stały zbiór wartości, który jest nam znany przed uruchomieniem programu, np. pory roku, planety, czy kolory kart. Zanim enumy były dodane do Javy, często deklarowano grupę podobnie nazwanych stałych typu int:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// The int enum pattern - severely deficient!</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">APPLE_FUJI</span>         <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">APPLE_PIPPIN</span>       <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">APPLE_GRANNY_SMITH</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">ORANGE_NAVEL</span>  <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">ORANGE_TEMPLE</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">ORANGE_BLOOD</span>  <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
</code></pre></div></div>

<p>Jest to znane jako <em>int enum pattern</em> i ma wiele wad i braków - nie powinniśmy już korzystać z tego typu stałych. Nie mamy tu żadnego bezpieczeństwa typów. Nie mają reprezentacji tekstowej, więc np. debuggując zobaczymy tylko cyferki. Nie mamy też możliwości iterowania po wszystkich elementach ani sprawdzenia ile ich jest. Wszystkie te problemy rozwiązują enumy, a nawet dają jeszcze więcej korzyści. Odpowiednik można zdefiniować tak:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Apple</span>  <span class="o">{</span> <span class="no">FUJI</span><span class="o">,</span> <span class="no">PIPPIN</span><span class="o">,</span> <span class="no">GRANNY_SMITH</span> <span class="o">}</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Orange</span> <span class="o">{</span> <span class="no">NAVEL</span><span class="o">,</span> <span class="no">TEMPLE</span><span class="o">,</span> <span class="no">BLOOD</span> <span class="o">}</span>
</code></pre></div></div>

<p>Enumy w Javie to pełnoprawne klasy, więc oferują dużo więcej niż zwykłe wartości <code class="highlighter-rouge">int</code>. Są to klasy, które dostarczają tylko jedną instancję dla każdej stałej i udostępniają ją poprzez pole <code class="highlighter-rouge">public static final</code>. Enumy są niemutowalne, nie posiadają publicznego konstruktora. Dostajemy też <em>type safty</em>, jako że są to pełnoprawne klasy. Dostarczają również implementacje wszystkich metod z klasy <code class="highlighter-rouge">Object</code> (były omawiane w <a href="/effective-java/metoda-equals">rozdziale 3</a>) oraz implementują <code class="highlighter-rouge">Comparable</code> i <code class="highlighter-rouge">Serializable</code>. Co więcej, pozwalają też na zdefiniowanie własnych metod i pól. Przykład bogatej klasy enum:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Enum type with data and behavior</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Planet</span> <span class="o">{</span>
    <span class="no">MERCURY</span><span class="o">(</span><span class="mf">3.302</span><span class="n">e</span><span class="o">+</span><span class="mi">23</span><span class="o">,</span> <span class="mf">2.439e6</span><span class="o">),</span>
    <span class="no">VENUS</span><span class="o">(</span><span class="mf">4.869</span><span class="n">e</span><span class="o">+</span><span class="mi">24</span><span class="o">,</span> <span class="mf">6.052e6</span><span class="o">),</span>
    <span class="no">EARTH</span><span class="o">(</span><span class="mf">5.975</span><span class="n">e</span><span class="o">+</span><span class="mi">24</span><span class="o">,</span> <span class="mf">6.378e6</span><span class="o">),</span>
    <span class="no">MARS</span><span class="o">(</span><span class="mf">6.419</span><span class="n">e</span><span class="o">+</span><span class="mi">23</span><span class="o">,</span> <span class="mf">3.393e6</span><span class="o">),</span>
    <span class="no">JUPITER</span><span class="o">(</span><span class="mf">1.899</span><span class="n">e</span><span class="o">+</span><span class="mi">27</span><span class="o">,</span> <span class="mf">7.149e7</span><span class="o">),</span>
    <span class="no">SATURN</span><span class="o">(</span><span class="mf">5.685</span><span class="n">e</span><span class="o">+</span><span class="mi">26</span><span class="o">,</span> <span class="mf">6.027e7</span><span class="o">),</span>
    <span class="no">URANUS</span><span class="o">(</span><span class="mf">8.683</span><span class="n">e</span><span class="o">+</span><span class="mi">25</span><span class="o">,</span> <span class="mf">2.556e7</span><span class="o">),</span>
    <span class="no">NEPTUNE</span><span class="o">(</span><span class="mf">1.024</span><span class="n">e</span><span class="o">+</span><span class="mi">26</span><span class="o">,</span> <span class="mf">2.477e7</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">mass</span><span class="o">;</span>           <span class="c1">// In kilograms</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">;</span>         <span class="c1">// In meters</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">surfaceGravity</span><span class="o">;</span> <span class="c1">// In m / s^2</span>

    <span class="c1">// Universal gravitational constant in m^3 / kg s^2</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">G</span> <span class="o">=</span> <span class="mf">6.67300</span><span class="no">E</span><span class="o">-</span><span class="mi">11</span><span class="o">;</span>

    <span class="c1">// Constructor</span>
    <span class="nc">Planet</span><span class="o">(</span><span class="kt">double</span> <span class="n">mass</span><span class="o">,</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mass</span> <span class="o">=</span> <span class="n">mass</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
        <span class="n">surfaceGravity</span> <span class="o">=</span> <span class="no">G</span> <span class="o">*</span> <span class="n">mass</span> <span class="o">/</span> <span class="o">(</span><span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">mass</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mass</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">radius</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">radius</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">surfaceGravity</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">surfaceGravity</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">surfaceWeight</span><span class="o">(</span><span class="kt">double</span> <span class="n">mass</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mass</span> <span class="o">*</span> <span class="n">surfaceGravity</span><span class="o">;</span>  <span class="c1">// F = ma</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Liczby w nawiasach po każdej planecie (stałej) to argumenty do konstruktora. Mając masę i promień planety, możemy policzyć jej przyspieszenie grawitacyjne (<code class="highlighter-rouge">surfaceGravity</code>), a to z kolei pozwala nam obliczyć, ile będzie ważył dany obiekt (o znanej masie na ziemi) na powierzchni każdej planety (metoda <code class="highlighter-rouge">surfaceWeight(double mass)</code>).</p>

<p>Enumy z natury są niemutowalne, dlatego wszystkie jej pola powinny być zadeklarowane jako <code class="highlighter-rouge">final</code>. Pola mogą być publiczne, ale lepiej zadeklarować je jako prywatne z getterami (<a href="/effective-java/gettery-i-settery">gettery i settery</a>).</p>

<p>Tak wygląda użycie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">earthWeight</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
<span class="kt">double</span> <span class="n">mass</span> <span class="o">=</span> <span class="n">earthWeight</span> <span class="o">/</span> <span class="nc">Planet</span><span class="o">.</span><span class="na">EARTH</span><span class="o">.</span><span class="na">surfaceGravity</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">Planet</span> <span class="n">planet</span> <span class="o">:</span> <span class="nc">Planet</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"Weight on %s is %f%n"</span><span class="o">,</span> <span class="n">planet</span><span class="o">,</span> <span class="n">planet</span><span class="o">.</span><span class="na">surfaceWeight</span><span class="o">(</span><span class="n">mass</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<p>i wynik:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Weight on MERCURY is 26.453469
Weight on VENUS is 63.353571
Weight on EARTH is 70.000000
Weight on MARS is 26.572280
Weight on JUPITER is 177.077561
Weight on SATURN is 74.585988
Weight on URANUS is 63.339884
Weight on NEPTUNE is 79.53844
</span></code></pre></div></div>

<p>Czasem potrzebujemy innego zachowania dla każdej stałej i jak najbardziej enumy to wspierają. Możemy to zrobić to tak:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Enum type with constant-specific method implementations</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Operation</span> <span class="o">{</span>
  <span class="no">PLUS</span>  <span class="o">{</span><span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">){</span><span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;}},</span>
  <span class="no">MINUS</span> <span class="o">{</span><span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">){</span><span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="o">;}},</span>
  <span class="no">TIMES</span> <span class="o">{</span><span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">){</span><span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">;}},</span>
  <span class="no">DIVIDE</span><span class="o">{</span><span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">){</span><span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">;}};</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Robiąc to w ten sposób, za każdym razem, gdy dodajemy nowe pole, jesteśmy zmuszeni dodać implementację metody <code class="highlighter-rouge">apply</code>.</p>

<p>Podsumowując, enumy są bardziej czytelne, bezpieczniejsze i mają dużo więcej możliwości niż zwykłe stałe, dlatego warto je stosować za każdym razem, gdy mamy zbiór stałych wartości ze wspólnej grupy, które znamy przed uruchomieniem programu.</p>

<h1 id="pola-instancji-enuma-zamiast-polegania-na-kolejności-zadeklarowania-stałych">Pola instancji enuma zamiast polegania na kolejności zadeklarowania stałych</h1>

<p>Tutaj omawiany jest dosyć specyficzny przypadek użycia metody <code class="highlighter-rouge">ordinal</code>, która zwraca liczbę będącą pozycją stałej, na której nie powinniśmy polegać:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Abuse of ordinal to derive an associated value - DON'T DO THIS</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Ensemble</span> <span class="o">{</span>
    <span class="no">SOLO</span><span class="o">,</span>   <span class="no">DUET</span><span class="o">,</span>   <span class="no">TRIO</span><span class="o">,</span> <span class="no">QUARTET</span><span class="o">,</span> <span class="no">QUINTET</span><span class="o">,</span>
    <span class="no">SEXTET</span><span class="o">,</span> <span class="no">SEPTET</span><span class="o">,</span> <span class="no">OCTET</span><span class="o">,</span> <span class="no">NONET</span><span class="o">,</span>  <span class="no">DECTET</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">numberOfMusicians</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">ordinal</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Obecna forma enuma będzie działać zgodnie z założeniami, jednak gdy będziemy chcieli coś w niej zmienić, to metoda <code class="highlighter-rouge">numberOfMusicians</code> nie będzie działać prawdiłowo, ponieważ polega na kolejności zadeklarowanych stałych.</p>

<p>Jeśli chcielibyśmy dodać <code class="highlighter-rouge">DOUBLE_QUARTET</code>, który składa się z 8 osób, to nie ma już takiej opcji, bo jest to zajęte przez <code class="highlighter-rouge">OCTET</code>. Również nie możemy dodać opcji <code class="highlighter-rouge">TRIPLE_QUARTE</code> (12 osób), bo nie ma określenia na 11 osób. Dlatego nie powinno się korzystać z tej metody w takich przypadkach. Nawet w specyfikacji jest taka notka:</p>

<p><em>“Most programmers will have no use for this method. It is designed for use by general-purpose enum-based data structures such as EnumSet and EnumMap.”</em></p>

<p>W takich przypadkach lepiej skorzystać po prostu z pól instancyjnych:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Ensemble</span> <span class="o">{</span>
    <span class="no">SOLO</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="no">DUET</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="no">TRIO</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="no">QUARTET</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="no">QUINTET</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
    <span class="no">SEXTET</span><span class="o">(</span><span class="mi">6</span><span class="o">),</span> <span class="no">SEPTET</span><span class="o">(</span><span class="mi">7</span><span class="o">),</span> <span class="no">OCTET</span><span class="o">(</span><span class="mi">8</span><span class="o">),</span> <span class="no">DOUBLE_QUARTET</span><span class="o">(</span><span class="mi">8</span><span class="o">),</span>
    <span class="no">NONET</span><span class="o">(</span><span class="mi">9</span><span class="o">),</span> <span class="no">DECTET</span><span class="o">(</span><span class="mi">10</span><span class="o">),</span> <span class="no">TRIPLE_QUARTET</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">numberOfMusicians</span><span class="o">;</span>
    <span class="nc">Ensemble</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">numberOfMusicians</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">numberOfMusicians</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">numberOfMusicians</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="enumset-zamiast-pól-bitowych">EnumSet zamiast pól bitowych</h1>

<p>Bardzo prosty przekaz - używajmy klasy EnumSet, gdy chcemy przekazywać kilka stałych z jednej grupy. Kiedyś to można było robić ręcznie, używając operacji bitowych:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Bit field enumeration constants - OBSOLETE!</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">STYLE_BOLD</span>          <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="o">;</span>  <span class="c1">// 1</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">STYLE_ITALIC</span>        <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">// 2</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">STYLE_UNDERLINE</span>     <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="o">;</span>  <span class="c1">// 4</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">STYLE_STRIKETHROUGH</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="o">;</span>  <span class="c1">// 8</span>

    <span class="c1">// Parameter is bitwise OR of zero or more STYLE_ constants</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyStyles</span><span class="o">(</span><span class="kt">int</span> <span class="n">styles</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Ta reprezentacja stałych pozwala łączyć je, używając operacji bitowej OR:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">text</span><span class="o">.</span><span class="na">applyStyles</span><span class="o">(</span><span class="no">STYLE_BOLD</span> <span class="o">|</span> <span class="no">STYLE_ITALIC</span><span class="o">);</span>
</code></pre></div></div>

<p>A tak powinno to wyglądać w dzisiejszych czasach:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// EnumSet - a modern replacement for bit fields</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Style</span> <span class="o">{</span> <span class="no">BOLD</span><span class="o">,</span> <span class="no">ITALIC</span><span class="o">,</span> <span class="no">UNDERLINE</span><span class="o">,</span> <span class="no">STRIKETHROUGH</span> <span class="o">}</span>

    <span class="c1">// Any Set could be passed in, but EnumSet is clearly best</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyStyles</span><span class="o">(</span><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Style</span><span class="o">&gt;</span> <span class="n">styles</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>I użycie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">text</span><span class="o">.</span><span class="na">applyStyles</span><span class="o">(</span><span class="nc">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Style</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span> <span class="nc">Style</span><span class="o">.</span><span class="na">ITALIC</span><span class="o">));</span>
</code></pre></div></div>

<p>Cały ciężar implementacji i poprawności operacji bitowych zrzucamy na <code class="highlighter-rouge">EnumSet</code> dodatkowo zyskując przejrzystość i <em>type safty</em>.</p>

<h1 id="enummap-zamiast-indexowania-metodą-ordinal">EnumMap zamiast indexowania metodą ordinal</h1>

<p>Podobnie jak wyżej, używajmy <code class="highlighter-rouge">EnumMap</code> zamiast ręcznego indexowania tablicy za pomocą metody <code class="highlighter-rouge">ordinal</code>.</p>

<p>Na przykładzie prostej klasy <code class="highlighter-rouge">Plant</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Plant</span> <span class="o">{</span>
    <span class="kd">enum</span> <span class="nc">LifeCycle</span> <span class="o">{</span> <span class="no">ANNUAL</span><span class="o">,</span> <span class="no">PERENNIAL</span><span class="o">,</span> <span class="no">BIENNIAL</span> <span class="o">}</span>

    <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">final</span> <span class="nc">LifeCycle</span> <span class="n">lifeCycle</span><span class="o">;</span>

    <span class="nc">Plant</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">LifeCycle</span> <span class="n">lifeCycle</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">lifeCycle</span> <span class="o">=</span> <span class="n">lifeCycle</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Załóżmy, że mamy tablicę roślin i chcemy poukładać je według cyklu życia. Potrzebowalibyśmy 3 setów, jeden dla każdego cyklu, i przeiterować po tablicy wkładając rośliny do odpowiednich setów. Można byłoby to zrobić indexując tablice przy pomocy metody <code class="highlighter-rouge">ordinal</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Using ordinal() to index into an array - DON'T DO THIS!</span>
<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Plant</span><span class="o">&gt;[]</span> <span class="n">plantsByLifeCycle</span> <span class="o">=</span>
    <span class="o">(</span><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Plant</span><span class="o">&gt;[])</span> <span class="k">new</span> <span class="nc">Set</span><span class="o">[</span><span class="nc">Plant</span><span class="o">.</span><span class="na">LifeCycle</span><span class="o">.</span><span class="na">values</span><span class="o">().</span><span class="na">length</span><span class="o">];</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">plantsByLifeCycle</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">plantsByLifeCycle</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span>

<span class="k">for</span> <span class="o">(</span><span class="nc">Plant</span> <span class="n">p</span> <span class="o">:</span> <span class="n">garden</span><span class="o">)</span>
    <span class="n">plantsByLifeCycle</span><span class="o">[</span><span class="n">p</span><span class="o">.</span><span class="na">lifeCycle</span><span class="o">.</span><span class="na">ordinal</span><span class="o">()].</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>

<span class="c1">// Print the results</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">plantsByLifeCycle</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s: %s%n"</span><span class="o">,</span>
        <span class="nc">Plant</span><span class="o">.</span><span class="na">LifeCycle</span><span class="o">.</span><span class="na">values</span><span class="o">()[</span><span class="n">i</span><span class="o">],</span> <span class="n">plantsByLifeCycle</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Jednak takie użycie nie jest zbyt dobre. Jest na to dużo lepszy sposób, który nie naraża nas na żadne błędy - użycie wydajnej implementacji mapy zaprojektowanej do pracy z enumami - <code class="highlighter-rouge">EnumMap</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Using an EnumMap to associate data with an enum</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Plant</span><span class="o">.</span><span class="na">LifeCycle</span><span class="o">,</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Plant</span><span class="o">&gt;&gt;</span>  <span class="n">plantsByLifeCycle</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nc">EnumMap</span><span class="o">&lt;&gt;(</span><span class="nc">Plant</span><span class="o">.</span><span class="na">LifeCycle</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">Plant</span><span class="o">.</span><span class="na">LifeCycle</span> <span class="n">lc</span> <span class="o">:</span> <span class="nc">Plant</span><span class="o">.</span><span class="na">LifeCycle</span><span class="o">.</span><span class="na">values</span><span class="o">())</span>
    <span class="n">plantsByLifeCycle</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">lc</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;());</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">Plant</span> <span class="n">p</span> <span class="o">:</span> <span class="n">garden</span><span class="o">)</span>
    <span class="n">plantsByLifeCycle</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">lifeCycle</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">plantsByLifeCycle</span><span class="o">);</span>
</code></pre></div></div>

<p>Program jest krótszy, czystszy, bezpieczniejszy i porównywalny w wydajności. Nie ma ostrzeżenia <code class="highlighter-rouge">unsafe cast</code>, wartości od razu przechowują swoją reprezentację tekstową i nie ma możliwości na błąd podczas przeliczania indexów.</p>

<h1 id="emuluowanie-rozszerzalnych-enumów-za-pomocą-interfejsów">Emuluowanie rozszerzalnych enumów za pomocą interfejsów</h1>

<p>Enumy mają jedno duże ograniczenie - nie mogą być rozszerzane i tak jest “by design”. Nie ma też dużo przypadków kiedy byłoby to niezbędne.</p>

<p>Jeden z use casów, gdzie moglibyśmy na tym skorzystać, to kody operacyjne, które reprezentują operację np. nasza klasa Operation. Czasami jest pożądane, aby użytkownicy API mogli podać swoją własną operację, rozszerzając te standardowe dostarczone przez API.</p>

<p>Jest na to całkiem dobry sposób, a wykorzystuje on fakt, że enumy mogą implementować interfejsy. Możemy więc zdefiniować interfejs definiujący operację:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Emulated extensible enum using an interface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Operation</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>i enum, który jest jego standardową implementacją:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">BasicOperation</span> <span class="kd">implements</span> <span class="nc">Operation</span> <span class="o">{</span>
    <span class="no">PLUS</span><span class="o">(</span><span class="s">"+"</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="no">MINUS</span><span class="o">(</span><span class="s">"-"</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="no">TIMES</span><span class="o">(</span><span class="s">"*"</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="no">DIVIDE</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span>
    <span class="o">};</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">symbol</span><span class="o">;</span>

    <span class="nc">BasicOperation</span><span class="o">(</span><span class="nc">String</span> <span class="n">symbol</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">symbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">symbol</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Warunkiem jest tutaj to, aby API używało wszędzie interfejsu jako typu operacji. Dzięki temu możemy stworzyć nowy enum, który implementuje ten interfejs i stworzyć dodatkowe implementacje np.:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Emulated extension enum</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">ExtendedOperation</span> <span class="kd">implements</span> <span class="nc">Operation</span> <span class="o">{</span>
    <span class="no">EXP</span><span class="o">(</span><span class="s">"^"</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">},</span>
    <span class="no">REMAINDER</span><span class="o">(</span><span class="s">"%"</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">double</span> <span class="nf">apply</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="n">y</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">symbol</span><span class="o">;</span>

    <span class="nc">ExtendedOperation</span><span class="o">(</span><span class="nc">String</span> <span class="n">symbol</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">symbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">symbol</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Tak by wyglądało użycie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">test</span><span class="o">(</span><span class="nc">ExtendedOperation</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Enum</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="nc">Operation</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">opEnumType</span><span class="o">,</span> <span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Operation</span> <span class="n">op</span> <span class="o">:</span> <span class="n">opEnumType</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">())</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%f %s %f = %f%n"</span><span class="o">,</span>
                          <span class="n">x</span><span class="o">,</span> <span class="n">op</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">op</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<p class="note"><code class="highlighter-rouge">&lt;T extends Enum&lt;T&gt; &amp; Operation&gt; Class&lt;T&gt;</code> zapewnia, że przekazany obiekt <code class="highlighter-rouge">Class&lt;T&gt;</code> jest zarówno enumem jak i implementuje <code class="highlighter-rouge">Operation</code>, co jest wymagane, aby przeiterować elementy enuma i użyć jego metod.</p>

<p>Alternatywnie moglibyśmy przekazać <code class="highlighter-rouge">Collection&lt;? extends Operation&gt;</code> zamiast tokenu klasy:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">test</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="nc">ExtendedOperation</span><span class="o">.</span><span class="na">values</span><span class="o">()),</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Operation</span><span class="o">&gt;</span> <span class="n">opSet</span><span class="o">,</span>
        <span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Operation</span> <span class="n">op</span> <span class="o">:</span> <span class="n">opSet</span><span class="o">)</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%f %s %f = %f%n"</span><span class="o">,</span>
                          <span class="n">x</span><span class="o">,</span> <span class="n">op</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">op</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Jest to nieco mniej skomplikowane i pozwala przekazać operacje z różnych implementacji.</p>

<p>Wadą tego rozwiązania jest to, że implementacje nie mogą być dziedziczone między enumami.</p>

<p>Takie użycie możemy znaleźć też w bibliotece Javy np.: enum <code class="highlighter-rouge">java.nio.file.LinkOption</code> implementuje <code class="highlighter-rouge">CopyOption</code> i <code class="highlighter-rouge">OpenOption</code>.</p>


      </div>
    </div>
  </div>

</article>

<div class="container d-print-none">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <hr>

      <ul class="pagination">
        
        <li class="page-item">
          <a class="page-link box-effect" href="/effective-java/bounded-wildcard-types"
             data-toggle="tooltip" data-animation="zoom" data-delay="50" title="Ograniczanie dozwolonych typów w generykach"><i class="fa fa-arrow-left"
                                                                                                            aria-hidden="true"></i>
            Poprzedni post</a>
        </li>
        
        
        <li class="page-item ml-auto">
          <a class="page-link box-effect" href="/effective-java/annotations"
             data-toggle="tooltip" data-animation="zoom" data-delay="50" title="Adnotacje">Następny post <i
                  class="fa fa-arrow-right" aria-hidden="true"></i></a>
        </li>
        
      </ul>

      <div class="text-center">
    <p class="text-center">Jeśli uważasz, że to co robię jest przydatne, polub stronę bloga na Facebooku. Wrzucam tam m.in. informacje o nowych wpisach, o promocjach dla programistów i inne.</p>

    <div class="fb-page inline box-effect">
        <iframe
            src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fdevcavepl&tabs&width=340&height=130&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=false&appId"></iframe>
    </div>
</div>

      <div class="recommended">
    <div class="box-effect books-ad ">
        <a href="https://jaki-jezyk-programowania.pl/ksiazki">
            <img src="/img/reuse/books.png" alt="książki"/>
            <h3>Zobacz polecane książki</h3>
        </a>
    </div>

    <div class="box-effect books-ad ">
        <a href="https://jaki-jezyk-programowania.pl/kursy">
            <img src="/img/reuse/video-courses.png" alt="video kursy"/>
            <h3>Zobacz polecane video kursy</h3>
        </a>
    </div>
</div>

      <hr>

      

<div id="disqus_thread"></div>
<script>
  const disqus_config = function () {
    this.page.url = "https://devcave.pl/effective-java/enums";
    this.page.identifier = "/effective-java/enums";
  };

  (function () { // DON'T EDIT BELOW THIS LINE
    const d = document, s = d.createElement('script');
    s.src = 'https://jaki-jezyk-programowania.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Włacz JavaScript w twojej przeglądarce, aby zobaczyć <a href="https://disqus.com/?ref_noscript"> komentarze by
    Disqus.</a></noscript>



    </div>
  </div>
</div>

<hr>

<script src="/promotion/promotion.js"></script>



<footer class="d-print-none">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center social-buttons">
                    <li class="list-inline-item">
                        <a class="main-btn" href="/feed.xml" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="RSS">
                            <i class="fa fa-rss fa-lg"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="main-btn" href="https://www.linkedin.com/in/marcin-lasota/" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="LinkedIn">
                            <i class="fa fa-linkedin-square" aria-hidden="true"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="main-btn" href="https://github.com/C0deboy" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="Github">
                            <i class="fa fa-github fa-lg"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="main-btn" href="mailto:lasota.marcinm@gmail.com" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="lasota.marcinm@gmail.com">
                            <i class="fa fa-envelope fa-lg"></i>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright <i class="fa fa-copyright" aria-hidden="true"></i> devcave 2017 - 2020</p>
            </div>
        </div>
    </div>
</footer>

<script src="/dist/js/devcave.min.js"></script>


</body>

</html>
