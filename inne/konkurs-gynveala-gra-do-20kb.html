<!DOCTYPE html>
<html lang="pl">
<head>
  
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Devcave - blog programisty na tematy związane z branżą IT, a szczególnie z programowaniem. Pracuję głownie z językami Java i Javascript, ale na blogu nie zabraknie tematów ogólnych ;)">
<meta name="author" content="Codeboy">

<meta property="fb:pages" content="2221389098088691">
<meta property="og:title" content="Konkurs Gynveala - gra do 20KB (strategia turowa)">
<meta property="og:description" content="Brałem udział, więc pokazuję co mi wyszło ;)">

<title>Konkurs Gynveala - gra do 20KB (strategia turowa)</title>

<link rel="canonical" href="https://devcave.pl/inne/konkurs-gynveala-gra-do-20kb">
<link rel="shortcut icon" href="/img/logo.ico">

<link rel="stylesheet" href="/dist/css/devcave.min.css">

<link href="//fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
<link href='//fonts.googleapis.com/css?family=Open+Sans:300,600,800' rel='stylesheet' type='text/css'>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link type="application/atom+xml" rel="alternate" href="https://devcave.pl/feed.xml" title="devcave.pl" />

</head>

<body>

<div class="navbar navbar-expand-lg navbar-light navbar-fixed-top navbar-custom">

    <a class="navbar-brand" href="/"><img src="/img/devcave.png" alt="logo"> devcave.pl</a>

    <button type="button" id="navbar-toggle-btn" class="navbar-toggler" data-toggle="collapse"
            data-target="#site-nav" aria-expanded="false" aria-controls="site-nav">

        Menu <i class="fa fa-bars" aria-hidden="true"></i>
    </button>

    <nav id="site-nav" class="collapse navbar-collapse">
        <ul class="nav navbar-nav ml-auto text-right">
            <li class="nav-item">
                <a class="nav-link" href="/o-mnie/">O mnie</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/archiwum/">Archiwum</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/kontakt/">Kontakt</a>
            </li>
            <li class="nav-item">
                <a class="nav-link books-btn" href="/moja-biblioteka">Moja biblioteka</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/moje-projekty">Moje projekty</a>
            </li>
            <li class="nav-item">
                <button class="dark-mode-btn nav-link" data-toggle="tooltip" data-placement="bottom"
                        title="Zmień motyw">
                    <i class="fa fa-sun-o" aria-hidden="true"></i>/<i class="fa fa-moon-o" aria-hidden="true"></i>
                </button>
            </li>
        </ul>
    </nav>
</div>


<article>

  <div class="container post">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

        <header class="post-header">
          <div class="post-heading">

            <h1 class="post-title">Konkurs Gynveala - gra do 20KB (strategia turowa)</h1>
            
            <h2 class="post-subtitle">Brałem udział, więc pokazuję co mi wyszło ;)</h2>
            
            <p class="post-meta">
              
              22
              stycznia
              
              2018</p>
            <div class="tags">
              <div class="site-tag"><a href='/archiwum#inne'>Inne</a></div>
              
            </div>

          </div>

          <hr>
        </header>

        
        <nav class="table-of-contents">
          <p class="m-0">Spis treści:</p>
          <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#co-udało-mi-się-zmieścić-w-te-20kb">Co udało mi się zmieścić w te 20KB?</a></li>
<li class="toc-entry toc-h1"><a href="#jak-gra-powstawała-i-jak-ją-zmieściłem-w-20kb">Jak gra powstawała i jak ją zmieściłem w 20KB?</a></li>
<li class="toc-entry toc-h1"><a href="#głosowanie">Głosowanie</a></li>
</ul>

          <hr>
        </nav>
        

        <p><a href="http://gynvael.coldwind.pl/?id=668">Konkurs</a> rozpoczął się jeszcze przed nowym rokiem. Polegał na stworzeniu turowej gry taktycznej do 20KB, przy użyciu tylko i wyłącznie czystego Javascriptu. Wszystko musiało być też w jednym pliku <span class="file">index.html</span>. Nie można było więc dociągać z innych źródeł obrazków, dźwięku, css-ów czy javascriptu. Wszystko musiało być wrzucone do jednego pliku. Ten limit stanowił główne wyzwanie. Oznaczało to też, że nie ma możliwości użycia żadnej biblioteki do tworzenia gier czy jakiegoś silnika. Nagrody prezentowały się następująco:</p>

<blockquote>
  <p>Best Game Award:<br />
Top 1: 150 USD (or equivalent in different currency)<br />
Top 2: 100 USD (or equivalent…)<br />
Top 3: 50 USD (or equivalent…)</p>
</blockquote>

<p>Gdzie głosują tylko wybrane osoby oraz:</p>

<blockquote>
  <p>Community Choice Award:<br />
Top 1: 100 USD (or equivalent…)<br />
Top 2: 50 USD (or equivalent…)<br />
Top 3: 25 USD (or equivalent…)</p>
</blockquote>

<p>gdzie może głosować każdy.</p>

<h1 id="co-udało-mi-się-zmieścić-w-te-20kb">Co udało mi się zmieścić w te 20KB?</h1>

<p>You Shall Not Pass - to tytuł gry. Wygląda mniej więcej tak:</p>

<p><img src="/img/GWGC2017/game.PNG" alt="Gra na konkurs" /></p>

<p>Gra dosyć prosta - player (Wizard), HP, Mana, 3 czary i 3 przeciwników z różnymi atakami. Na turę można wykonać 3 ruchy, 3 ataki no i czary według many. Celem jest przebicie się do portalu, który znajduję się na krańcach mapy i wejście na wyższy level, gdzie mamy więcej przeciwników. Nie ma ostatniego levelu, jednak po pewnym czasie jest tak dużo przeciwników, że nie da się wygrać. Więcej zmieścić się nie dało.</p>

<p>W grę możesz zagrać <a href="https://c0deboy.github.io/You-Shall-Not-Pass/">tutaj</a>, jednak najpierw polecam przeczytać <a href="https://github.com/C0deboy/You-Shall-Not-Pass#readme">README</a>, żeby zobaczyć sterowanie i kluczowe informacje.</p>

<h1 id="jak-gra-powstawała-i-jak-ją-zmieściłem-w-20kb">Jak gra powstawała i jak ją zmieściłem w 20KB?</h1>

<p>Nad grą dużo nie myślałem. Jeden wieczór i już miałem w miarę całą wizję na grę. Oczywiście nie wszystko udało się zrobić, część rzeczy została również okrojona ze względu na limit 20KB. Moje założenia były nieco optymistyczne i gra wyszła taka sobie. Mimo wszystko jestem zadowolony, że udało mi się to jakoś wcisnąć do 20KB. Bo jak to wyglądało? Kod Javascriptu starałem się pisać “obiektowo”, czyli nie pisałem wszystkiego w jednym pliku. Uproszczona struktura plików wyglądała mniej więcej tak:</p>

<p><img src="/img/GWGC2017/file-structure.PNG" alt="Strukura plików" /></p>

<p>Z użyciem webpacka połączyłem wszystko w całość, a dzięki uglify-js mogłem zminifikować kod do takiej postaci:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">exports</span><span class="p">;</span><span class="kd">var</span> <span class="nx">s</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="p">,</span><span class="na">l</span><span class="p">:</span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="na">exports</span><span class="p">:{}};</span><span class="k">return</span> <span class="nx">t</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">s</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="nx">s</span><span class="p">.</span><span class="nx">l</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">s</span><span class="p">.</span><span class="nx">exports</span><span class="p">}</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{};</span><span class="nx">e</span><span class="p">.</span><span class="nx">m</span><span class="o">=</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">i</span><span class="p">){</span><span class="nx">e</span><span class="p">.</span><span class="nx">o</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">a</span><span class="p">,{</span><span class="na">configurable</span><span class="p">:</span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="na">enumerable</span><span class="p">:</span><span class="o">!</span><span class="mi">0</span><span class="p">,</span><span class="na">get</span><span class="p">:</span><span class="nx">i</span><span class="p">})},</span><span class="nx">e</span><span class="p">.</span><span class="nx">n</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">t</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="p">.</span><span class="nx">__esModule</span><span class="p">?</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="k">default</span><span class="p">}:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">t</span><span class="p">};</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">"a"</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">},</span><span class="nx">e</span><span class="p">.</span><span class="nx">o</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">)},</span><span class="nx">e</span><span class="p">.</span><span class="nx">p</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span><span class="nx">e</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">s</span><span class="o">=</span><span class="mi">0</span><span class="p">)}([</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="s2">"use strict"</span><span class="p">;</span><span class="kd">function</span> <span class="nx">i</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">k</span><span class="o">=</span><span class="nx">t</span><span class="p">,(</span><span class="nx">p</span><span class="o">=</span><span class="k">new</span> <span class="nx">l</span><span class="p">.</span><span class="nx">a</span><span class="p">).</span><span class="nx">setLevel</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawTextCenter</span><span class="p">(</span><span class="s2">"Level "</span><span class="o">+</span><span class="nx">t</span><span class="p">),</span><span class="nx">x</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">getMap</span><span class="p">(),</span><span class="nx">C</span><span class="o">=</span><span class="k">new</span> <span class="nx">u</span><span class="p">.</span><span class="nx">a</span><span class="p">,(</span><span class="nx">v</span><span class="o">=</span><span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">a</span><span class="p">).</span><span class="nx">health</span><span class="o">=</span><span class="mi">30</span><span class="o">/</span><span class="p">(</span><span class="nx">E</span><span class="o">/</span><span class="mf">1.2</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">health</span><span class="p">),</span><span class="nx">y</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">updateUI</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span><span class="nx">C</span><span class="p">),</span><span class="nx">B</span><span class="o">=</span><span class="p">[],</span><span class="nx">M</span><span class="o">&amp;&amp;</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawEndTile</span><span class="p">(</span><span class="mi">32</span><span class="o">*</span><span class="nx">p</span><span class="p">.</span><span class="nx">endTileCords</span><span class="p">.</span><span class="nx">x</span><span class="o">+</span><span class="mi">16</span><span class="p">,</span><span class="mi">32</span><span class="o">*</span><span class="nx">p</span><span class="p">.</span><span class="nx">endTileCords</span><span class="p">.</span><span class="nx">y</span><span class="o">+</span><span class="mi">16</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span><span class="mi">700</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">s</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="nx">p</span><span class="p">.</span><span class="nx">removeFromWorld</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">y</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">B</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="nx">B</span><span class="p">[</span><span class="nx">e</span><span class="p">].</span><span class="nx">id</span><span class="o">===</span><span class="nx">t</span><span class="p">.</span><span class="nx">id</span><span class="o">&amp;&amp;</span><span class="nx">B</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="mi">1</span><span class="p">)},</span><span class="mi">300</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">r</span><span class="p">(){</span><span class="nx">y</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">updateUI</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span><span class="nx">C</span><span class="p">),</span><span class="nx">p</span><span class="p">.</span><span class="nx">updateUnit</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">t</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="kd">let</span> <span class="nx">e</span><span class="o">=</span><span class="nx">P</span><span class="p">[(</span><span class="k">new</span> <span class="nx">t</span><span class="p">).</span><span class="nx">name</span><span class="o">+</span><span class="s2">"s"</span><span class="p">];</span><span class="kd">const</span> <span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="o">*=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span><span class="nx">p</span><span class="p">.</span><span class="nx">currentLevel</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">){</span><span class="kd">let</span> <span class="nx">e</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">getUniqueMapCords</span><span class="p">();</span><span class="kd">const</span> <span class="nx">a</span><span class="o">=</span><span class="k">new</span> <span class="nx">t</span><span class="p">(</span><span class="mi">32</span><span class="o">*</span><span class="nx">e</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="mi">32</span><span class="o">*</span><span class="nx">e</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span><span class="nx">B</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">p</span><span class="p">.</span><span class="nx">updateUnit</span><span class="p">(</span><span class="nx">a</span><span class="p">)}}</span><span class="nx">t</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">a</span><span class="p">),</span><span class="nx">t</span><span class="p">(</span><span class="nx">A</span><span class="p">.</span><span class="nx">a</span><span class="p">),</span><span class="nx">t</span><span class="p">(</span><span class="nx">w</span><span class="p">.</span><span class="nx">a</span><span class="p">)}(),</span><span class="nx">T</span><span class="p">.</span><span class="nx">updateEnemies</span><span class="p">(</span><span class="nx">B</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">addListeners</span><span class="p">(),</span><span class="nx">C</span><span class="p">.</span><span class="nx">addNextTurnAction</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawUnit</span><span class="p">(</span><span class="nx">v</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">n</span><span class="p">(){</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">clear</span><span class="p">(),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawTerrain</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">x</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawCircle</span><span class="p">(</span><span class="mi">32</span><span class="o">*</span><span class="nx">p</span><span class="p">.</span><span class="nx">endTileCords</span><span class="p">.</span><span class="nx">x</span><span class="o">+</span><span class="mi">16</span><span class="p">,</span><span class="mi">32</span><span class="o">*</span><span class="nx">p</span><span class="p">.</span><span class="nx">endTileCords</span><span class="p">.</span><span class="nx">y</span><span class="o">+</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="s2">"blue"</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawEnemies</span><span class="p">(</span><span class="nx">B</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawUnit</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">updateContext</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">v</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawLightAroundPlayer</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="nx">y</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">updateUI</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span><span class="nx">C</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">o</span><span class="p">(){</span><span class="nx">v</span><span class="p">.</span><span class="nx">x</span><span class="o">===</span><span class="mi">32</span><span class="o">*</span><span class="nx">p</span><span class="p">.</span><span class="nx">endTileCords</span><span class="p">.</span><span class="nx">x</span><span class="o">&amp;&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">y</span><span class="o">===</span><span class="mi">32</span><span class="o">*</span><span class="nx">p</span><span class="p">.</span><span class="nx">endTileCords</span><span class="p">.</span><span class="nx">y</span><span class="o">&amp;&amp;</span><span class="nx">i</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">currentLevel</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">v</span><span class="p">.</span><span class="nx">avaiableMoves</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">avaiableAttacks</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">mana</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">&amp;&amp;</span><span class="nx">v</span><span class="p">.</span><span class="nx">mana</span><span class="o">++</span><span class="p">,</span><span class="nx">T</span><span class="p">.</span><span class="nx">updateEnemies</span><span class="p">(</span><span class="nx">B</span><span class="p">),</span><span class="nx">T</span><span class="p">.</span><span class="nx">moveEnemiesToPlayer</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="nx">T</span><span class="p">.</span><span class="nx">moveEnemiesToPlayer</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="mi">600</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">T</span><span class="p">.</span><span class="nx">moveEnemiesToPlayer</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="nx">B</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">t</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">t</span><span class="p">.</span><span class="nx">avaiableAttacks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">t</span><span class="p">.</span><span class="nx">freezed</span><span class="o">=!</span><span class="mi">1</span><span class="p">})},</span><span class="mi">1200</span><span class="p">),</span><span class="nx">v</span><span class="p">.</span><span class="nx">health</span><span class="o">&lt;=</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="nx">v</span><span class="p">.</span><span class="nx">frame</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="mi">300</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="nx">v</span><span class="p">.</span><span class="nx">frame</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">"You have died. Try again."</span><span class="p">),</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">()},</span><span class="mi">1</span><span class="nx">e3</span><span class="p">))}</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">"__esModule"</span><span class="p">,{</span><span class="na">value</span><span class="p">:</span><span class="o">!</span><span class="mi">0</span><span class="p">}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">"destroyEnemy"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">s</span><span class="p">}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">"world"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">p</span><span class="p">}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">"player"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">v</span><span class="p">});</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="nx">A</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="nx">u</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span><span class="nx">y</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="nx">w</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span><span class="kd">let</span> <span class="nx">p</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">C</span><span class="p">,</span><span class="nx">v</span><span class="p">,</span><span class="nx">B</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">E</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span><span class="nx">M</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="kd">const</span> <span class="nx">T</span><span class="o">=</span><span class="k">new</span> <span class="nx">d</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nx">f</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span><span class="nx">P</span><span class="o">=</span><span class="p">{</span><span class="na">Goblins</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="na">Imps</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s2">"Orc Archers"</span><span class="p">:</span><span class="mi">3</span><span class="p">};</span><span class="nb">window</span><span class="p">.</span><span class="nx">setDifficulty</span><span class="o">=</span><span class="p">(</span><span class="nx">t</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">E</span><span class="o">=</span><span class="mf">1.2</span><span class="o">*</span><span class="nx">t</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">".difficulty"</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">"none"</span><span class="p">,</span><span class="nx">i</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">n</span><span class="p">)}),</span><span class="nb">window</span><span class="p">.</span><span class="nx">setSpell</span><span class="o">=</span><span class="p">((</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">v</span><span class="p">.</span><span class="nx">spell</span><span class="o">=</span><span class="nx">t</span><span class="p">,</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">".spell"</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">t</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">t</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span><span class="o">=</span><span class="s2">"2px solid #562403"</span><span class="p">}),</span><span class="nx">e</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span><span class="o">=</span><span class="s2">"2px solid #5b86e5"</span><span class="p">}),</span><span class="nb">window</span><span class="p">.</span><span class="nx">restartLevel</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">i</span><span class="p">(</span><span class="nx">k</span><span class="p">)},</span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"keydown"</span><span class="p">,</span><span class="nx">t</span><span class="o">=&gt;</span><span class="p">{</span><span class="kd">const</span> <span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span><span class="nx">v</span><span class="p">.</span><span class="nx">avaiableMoves</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="mi">37</span><span class="o">===</span><span class="nx">t</span><span class="o">||</span><span class="mi">65</span><span class="o">===</span><span class="nx">t</span><span class="p">?</span><span class="nx">v</span><span class="p">.</span><span class="nx">moveLeft</span><span class="p">():</span><span class="mi">39</span><span class="o">===</span><span class="nx">t</span><span class="o">||</span><span class="mi">68</span><span class="o">===</span><span class="nx">t</span><span class="p">?</span><span class="nx">v</span><span class="p">.</span><span class="nx">moveRight</span><span class="p">():</span><span class="mi">38</span><span class="o">===</span><span class="nx">t</span><span class="o">||</span><span class="mi">87</span><span class="o">===</span><span class="nx">t</span><span class="p">?</span><span class="nx">v</span><span class="p">.</span><span class="nx">moveUp</span><span class="p">():</span><span class="mi">40</span><span class="o">!==</span><span class="nx">t</span><span class="o">&amp;&amp;</span><span class="mi">83</span><span class="o">!==</span><span class="nx">t</span><span class="o">||</span><span class="nx">v</span><span class="p">.</span><span class="nx">moveDown</span><span class="p">()}(</span><span class="nx">e</span><span class="p">)}),</span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"keydown"</span><span class="p">,</span><span class="nx">t</span><span class="o">=&gt;</span><span class="p">{</span><span class="kd">const</span> <span class="nx">e</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span><span class="mi">13</span><span class="o">!==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="mi">70</span><span class="o">!==</span><span class="nx">e</span><span class="o">||</span><span class="nx">C</span><span class="p">.</span><span class="nx">nextTurn</span><span class="p">()})},</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="s2">"use strict"</span><span class="p">;</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="nx">s</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="nx">r</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="kd">let</span> <span class="nx">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="p">.</span><span class="nx">a</span><span class="o">=</span><span class="kd">class</span><span class="p">{</span><span class="kd">constructor</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">n</span><span class="o">++</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">avaiableMoves</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">avaiableAttacks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">isMoving</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">tick</span><span class="o">=</span><span class="mi">10</span><span class="p">}</span><span class="nx">moveUp</span><span class="p">(){</span><span class="nx">s</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">isCollidingUp</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">updateLastPosition</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="o">-=</span><span class="mi">32</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">afterMove</span><span class="p">())}</span><span class="nx">moveDown</span><span class="p">(){</span><span class="nx">s</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">isCollidingDown</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">updateLastPosition</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="o">+=</span><span class="mi">32</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">afterMove</span><span class="p">())}</span><span class="nx">moveLeft</span><span class="p">(){</span><span class="nx">s</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">isCollidingLeft</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">updateLastPosition</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="o">-=</span><span class="mi">32</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">afterMove</span><span class="p">())}</span><span class="nx">moveRight</span><span class="p">(){</span><span class="nx">s</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">isCollidingRight</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">updateLastPosition</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="o">+=</span><span class="mi">32</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">afterMove</span><span class="p">())}</span><span class="nx">afterMove</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">isMoving</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">s</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">updateUnit</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">i</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawUnit</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">isMoving</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="mi">400</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">avaiableMoves</span><span class="o">--</span><span class="p">}</span><span class="nx">updateLastPosition</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">lastY</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">lastX</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">}</span><span class="nx">revertMove</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lastX</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lastY</span><span class="p">}</span><span class="nx">takeDamage</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">health</span><span class="o">-=</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">addAnimation</span><span class="p">(()</span><span class="o">=&gt;</span><span class="nx">i</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">drawBlood</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lastX</span><span class="o">+</span><span class="mi">16</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">lastY</span><span class="o">+</span><span class="mi">16</span><span class="p">)</span>
<span class="c1">// i wiele wiele więcej...</span></code></pre></figure>

<p>HTML i CSS-y wyglądały podobnie. Dowiedziałem się, że obrazki również można zakodować tekstem, dzięki base64. Wtedy jako src (source) obrazka można było użyć przykładowo takiej oto postaci:</p>

<pre>
<code class="highlight"><span class="s">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAMAAACelLz8AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURUdwTOujLOXn7z8oFmVVU21cWZSJkKRrGMTEz39PEFs7G7GFQ3VtgNPQ2NbT2nZzjXFhU5aZp4Ftno8AAAAPdFJOUwD8/fyAVSX+/v645MBXnxS2UhAAAAC4SURBVCjPdZJBkgQhCARFVEC6Ff//2WE9LrRHM6pMCEsZ7xolP/3htd53pOgw11pXROPZf6TyG1Hb55xaz8rQNiJvDbHR9zEA4/jaRQRkzCvx+Kx0/8s4syxXRb4Z4qmcbK3vjSLuWVuDHnKEHuSjoOO/qHkOCYBmqDQRBSGYyXwotImkB5Nnu8dRackABiQkOBPkBjLRNDIlmr10MwuVQ+9VQ7X28ZGmGekXE4CZB7vP1noea65TfvQbCKXzIW49AAAAAElFTkSuQmCC"</span></code></pre>

<p>I z tego powstaje nam:</p>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAMAAACelLz8AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURUdwTOujLOXn7z8oFmVVU21cWZSJkKRrGMTEz39PEFs7G7GFQ3VtgNPQ2NbT2nZzjXFhU5aZp4Ftno8AAAAPdFJOUwD8/fyAVSX+/v645MBXnxS2UhAAAAC4SURBVCjPdZJBkgQhCARFVEC6Ff//2WE9LrRHM6pMCEsZ7xolP/3htd53pOgw11pXROPZf6TyG1Hb55xaz8rQNiJvDbHR9zEA4/jaRQRkzCvx+Kx0/8s4syxXRb4Z4qmcbK3vjSLuWVuDHnKEHuSjoOO/qHkOCYBmqDQRBSGYyXwotImkB5Nnu8dRackABiQkOBPkBjLRNDIlmr10MwuVQ+9VQ7X28ZGmGekXE4CZB7vP1noea65TfvQbCKXzIW49AAAAAElFTkSuQmCC" /></p>

<p>Sprawdź source tego obrazka (prawy przycisk myszy i zbadaj). Wstawiłem go właśnie w ten sposób.</p>

<p>Niestety, tekst opisujący ten obrazek waży więcej niż sam obrazek. No ale jest to wymóg konkursu - wszystko musi być w jednym pliku html. Nie można podawać zewnętrznych źródeł.</p>

<p>Mimo minifikacji, nie udało się zmieścić zmieścić obecną grę w 20KB, więc zacząłem szukać innego rozwiązania. I tu z pomocą przyszedł <a href="http://dean.edwards.name/packer/">packer</a>. Dzięki niemu spadło kilka KB, a kod wyglądał mniej więcej tak:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span><span class="kr">eval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">r</span><span class="p">){</span><span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">?</span><span class="s1">''</span><span class="p">:</span><span class="nx">e</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">c</span><span class="o">/</span><span class="nx">a</span><span class="p">)))</span><span class="o">+</span><span class="p">((</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">%</span><span class="nx">a</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">35</span><span class="p">?</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="mi">29</span><span class="p">):</span><span class="nx">c</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">36</span><span class="p">))};</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="s1">''</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/</span><span class="p">,</span><span class="nb">String</span><span class="p">)){</span><span class="k">while</span><span class="p">(</span><span class="nx">c</span><span class="o">--</span><span class="p">)</span><span class="nx">r</span><span class="p">[</span><span class="nx">e</span><span class="p">(</span><span class="nx">c</span><span class="p">)]</span><span class="o">=</span><span class="nx">k</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">||</span><span class="nx">e</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="nx">k</span><span class="o">=</span><span class="p">[</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span> <span class="nx">r</span><span class="p">[</span><span class="nx">e</span><span class="p">]}];</span><span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="s1">'</span><span class="err">\\</span><span class="s1">w+'</span><span class="p">};</span><span class="nx">c</span><span class="o">=</span><span class="mi">1</span><span class="p">};</span><span class="k">while</span><span class="p">(</span><span class="nx">c</span><span class="o">--</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">k</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="nx">p</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">'</span><span class="err">\\</span><span class="s1">b'</span><span class="o">+</span><span class="nx">e</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">+</span><span class="s1">'</span><span class="err">\\</span><span class="s1">b'</span><span class="p">,</span><span class="s1">'g'</span><span class="p">),</span><span class="nx">k</span><span class="p">[</span><span class="nx">c</span><span class="p">]);</span><span class="k">return</span> <span class="nx">p</span><span class="p">}(</span><span class="s1">'!q(t){q e(i){1c(a[i])D a[i].1n;Y s=a[i]={i,l:!1,1n:{}};D t[i].35(s.1n,s,s.1n,e),s.l=!0,s.1n}Y a={};e.m=t,e.c=a,e.d=q(t,a,i){e.o(t,a)||1S.3n(t,a,{8X:!1,8W:!0,8V:i})},e.n=q(t){Y a=t&amp;&amp;t.48?q(){D t.33}:q(){D t};D e.d(a,"a",a),a},e.o=q(t,e){D 1S.8R.8Q.35(t,e)},e.p="",e(e.s=0)}([q(t,e,a){"R W";q i(t){k=t,(p=1e l.a).3U(t),m.a.3Y("8O "+t),x=p.49(),C=1e u.a,(v=1e c.a).17=30/(E/1.2*2)+10,8M.8L(v.17),y.a.2c(v,C),B=[],M&amp;&amp;m.a.46(32*p.1u.x+16,32*p.1u.y+16),V(r,34)}q s(t){p.2X(t.x,t.y),V(()=&gt;{1q(F e=0;e&lt;B.1k;e++)B[e].2I===t.2I&amp;&amp;B.2W(e,1)},1t)}q r(){y.a.2c(v,C),p.1s(v),q(){q t(t){F e=P[(1e t).1v+"s"];L a=e*=G.8G(G.1V(E,p.2e));1q(F e=0;e&lt;a;e++){F e=p.2A();L a=1e t(32*e.x,32*e.y);B.1y(a),p.1s(a)}}t(h.a),t(A.a),t(w.a)}(),T.2G(B),b.36(),C.3a(o),m.a.1J(v)}q n(){m.a.3c(),m.a.3d(p,x),m.a.1h(32*p.1u.x+16,32*p.1u.y+16,16,"8F"),m.a.3u(B),m.a.1J(v),b.3v(x,v),m.a.3A(v),y.a.2c(v,C)}q o(){v.x===32*p.1u.x&amp;&amp;v.y===32*p.1u.y&amp;&amp;i(p.2e+1),v.1g=3,v.1b=3,v.1j&lt;10&amp;&amp;v.1j++,T.2G(B),T.27(v),V(()=&gt;T.27(v),3P),V(()=&gt;{T.27(v),B.1d(t=&gt;{t.1b=1,t.23=!1})},8C),v.17&lt;=0&amp;&amp;(V(()=&gt;v.I=3,1t),V(()=&gt;v.I=4,3P),V(()=&gt;{8B("42 8A 8z. 8y 8x."),1A.8w.8v()},1N))}1S.3n(e,"48",{8u:!0}),a.d(e,"2K",q(){D s}),a.d(e,"J",q(){D p}),a.d(e,"z",q(){D v});Y l=a(6),c=a(5),h=a(8),A=a(9),d=a(10),m=a(2),u=a(11),f=a(12),y=a(15),g=a(3),w=a(16);F p,x,C,v,B,k,E=1.2,M=!0;L T=1e d.a,b=1e f.a,P={8t:3,8s:3,"3k 8r":3};1A.8p=(t=&gt;{E=1.2*t/2,U.8o(".8n").1f.2Q="3w",i(1),g.a.3y(n)}),1A.8m=((t,e)=&gt;{v.1K=t,U.8j(".1K").1d(t=&gt;{t.1f.3D="3E 3F #8i"}),e.1f.3D="3E 3F #1L"}),1A.8h=q(){i(k)},U.1F("3M",t=&gt;{L e=t.3O;v.1g&gt;0&amp;&amp;q(t){37===t||65===t?v.1p():39===t||68===t?v.1o():38===t||87===t?v.1G():40!==t&amp;&amp;83!==t||v.1B()}(e)}),U.1F("3M",t=&gt;{L e=t.3O;13!==e&amp;&amp;70!==e||C.45()})},q(t,e,a){"R W";Y i=a(2),s=a(0),r=a(3);F n=0;e.a=X{1r(){j.2I=n++,j.1g=1,j.1b=1,j.I=1,j.2n=!1,j.2o=10}1G(){s.J.2r(j)||(j.1P(),j.y-=32,j.1Q())}1B(){s.J.2x(j)||(j.1P(),j.y+=32,j.1Q())}1p(){s.J.1E(j)||(j.1P(),j.x-=32,j.I=-1,j.1Q())}1o(){s.J.1C(j)||(j.1P(),j.x+=32,j.I=1,j.1Q())}1Q(){j.2n=!0,s.J.1s(j),i.a.1J(j),V(()=&gt;j.2n=!1,4R),j.1g--}1P(){j.Q=j.y,j.O=j.x}4P(){j.x=j.O,j.y=j.Q}1x(t){j.17-=t,r.a.1l(()=&gt;i.a.2F(j.O+16,j.Q+16),1t),V(i.a.3e,1t)}}},q(t,e,a){"R W";q i(t){L e=1e 4N;D e.4M=t,e}Y s=a(4),r=a(3),n=a(7),o=a.n(n);L l=U.1H("3h"),c=l.4L("2d"),h=32,A={4J:11,4I:5,4H:7,"4G 4D":15,3o:3,3p:4,3q:1,3r:2};F d=[];X m{H 3c(){c.4C(0,0,l.1D,l.2i)}H 2j(t,e,a){c.2j(i(o.a),A[t]*h-h,0,h,h,e,a,h,h)}H 1J(t){t.O!==t.x?t.O&gt;t.x?t.O-=1:t.O+=1:t.Q!==t.y&amp;&amp;(t.Q&gt;t.y?t.Q-=1:t.Q+=1),t.2o&gt;10&amp;&amp;!0===t.2n?(-1===t.I||-2===t.I?-1===t.I?t.I=-2:t.I=-1:1!==t.I&amp;&amp;2!==t.I||(1===t.I?t.I=2:t.I=1),t.2o=0):t.2o++,c.3x();F e=t.O,a=t.Q;-3===t.I?(c.2B(1,-1),a=-a-h):t.I&lt;0?(c.2B(-1,1),e=-e-h):c.2B(1,1),c.2j(i(o.a),A[t.1v.4B()]*h-h+G.2D(t.I)*h-h,0,h,h,e,a,h,h),c.3B()}H 3u(t){t.1d(t=&gt;{m.1J(t),t.23&amp;&amp;m.1W(t.x,t.y+h,t.x+h,t.y+h,"#1L",5)})}H 3d(t,e){t.2l.1d(a=&gt;{m.2j(t.2m[e[a.y][a.x]-1],a.x*h,a.y*h)})}H 3A(t){c.3x(),c.1X(),c.1Y=1N,c.2p="2q(0,0,0,.96)",c.4A="4y(3J)",c.3K(t.O+16,t.Q+16,34,0,2*G.3L),c.2J(),c.3B()}H 1W(t,e,a,i,s,r=2){c.1X(),c.3N(t,e),c.4x(a,i),c.1Y=r,c.2p=s,c.2J(),c.2s()}H 1h(t,e,a,i,s=2){c.1X(),c.3K(t,e,a,0,2*G.3L),c.1Y=s,c.2p=i,c.2J(),c.2s()}H 2M(t,e){F a=0;r.a.1l(()=&gt;{c.1X(),c.22="2q(4r, 4q, 4p, 0.86)",c.3N(26+t,11+e),c.3W(6+t,12+e,28+t,37+e,21+t,29+e),c.3W(20+t,28+e,-7+t,8+e,25+t-a++,9+e),c.2S(),c.2s()},50)}H 43(t,e,a,i){F s=0;r.a.1l(()=&gt;{c.1Y=2;F r=t.I&lt;0?6:24;m.1W(t.x+r,t.y+3,e+16,a+16,i),c.2p=i,m.1h(e+16,a+16,6+s,i),m.1h(e+16,a+16,4+s/2,i),m.2F(e+16,a+16),s+=.5},6L)}H 
//i jeszcze hoho...</span></code></pre></figure>

<p>Mimo TAKIEJ kompresji nadal nie udało się tego zmieścić poniżej 20KB. Znalazłem trochę pełnych nazw metod, pól czy selektorów w kodzie, dlatego ręcznie pozmieniałem ich nazwy na 1-3 literowe. Dopiero wtedy udało mi się zejść idealnie na 20480 bajtów, czyli na styk. Choćby jeden bajt więcej i bym sie nie załapał. Jednak nie obyło się bez błedów. Pradopodobnie przez to, że ręcznie pozmieniałem kilka wartości pojawiło się kilka bugów, które ludzie wyłapali i są obecnie w wersji, która podlega ocenie. Projekt oddałem prawie o 3 w nocy, w dzień, który był deadlinem, więc już nie miałem czasu tego naprawiać.</p>

<p>Mimo wszystko jestem zadowolony z rezultatów.</p>

<h1 id="głosowanie">Głosowanie</h1>

<p>Do 28.01.2018r trwa głosowanie, więc byłbym wdzięczny jeśli zostawiłbyś/zostawiłabyś swój głos ;)</p>

<p>Głosowanie społeczności odbywa się poprzez like-i pod video na YouTube - <a href="https://youtu.be/3Nbu50KgFbw">link</a></p>

<p>PS: Nie sugerujcie się tylko i wyłącznie tym video, bo jest takie sobie. Nie ja robiłem. Myślę, że gdybym sam je robił, udałoby mi się ją przedstawić w nieco lepszym świetle.</p>


      </div>
    </div>
  </div>

</article>

<div class="container d-print-none">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <hr>

      <ul class="pagination">
        
        <li class="page-item">
          <a class="page-link box-effect" href="/podsumowania/podsumowanie-roku-2017-i-postanowienia-noworoczne"
             data-toggle="tooltip" data-animation="zoom" data-delay="50" title="Podsumowanie roku 2017"><i class="fa fa-arrow-left"
                                                                                                            aria-hidden="true"></i>
            Poprzedni post</a>
        </li>
        
        
        <li class="page-item ml-auto">
          <a class="page-link box-effect" href="/moje-doswiadczenia/pierwsza-praca-jako-programista"
             data-toggle="tooltip" data-animation="zoom" data-delay="50" title="Pierwsza praca jako programista">Następny post <i
                  class="fa fa-arrow-right" aria-hidden="true"></i></a>
        </li>
        
      </ul>

      <div class="text-center">
    <p class="text-center">Jeśli uważasz, że to co robię jest przydatne, polub stronę bloga na Facebooku. Wrzucam tam m.in. informacje o nowych wpisach, o promocjach dla programistów i inne.</p>

    <div class="fb-page inline box-effect">
        <iframe
            src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fdevcavepl&tabs&width=340&height=130&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=false&appId"></iframe>
    </div>
</div>

      <div class="recommended">
    <div class="box-effect books-ad ">
        <a href="https://jaki-jezyk-programowania.pl/ksiazki">
            <img src="/img/books.png" alt="książki"/>
            <h3>Zobacz polecane książki</h3>
        </a>
    </div>

    <div class="box-effect books-ad ">
        <a href="https://jaki-jezyk-programowania.pl/kursy">
            <img src="/img/video-courses.png" alt="video kursy"/>
            <h3>Zobacz polecane video kursy</h3>
        </a>
    </div>
</div>

      <hr>

      

<div id="disqus_thread"></div>
<script>
  const disqus_config = function () {
    this.page.url = "https://devcave.pl/inne/konkurs-gynveala-gra-do-20kb";
    this.page.identifier = "/inne/konkurs-gynveala-gra-do-20kb";
  };

  (function () { // DON'T EDIT BELOW THIS LINE
    const d = document, s = d.createElement('script');
    s.src = 'https://jaki-jezyk-programowania.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Włacz JavaScript w twojej przeglądarce, aby zobaczyć <a href="https://disqus.com/?ref_noscript"> komentarze by
    Disqus.</a></noscript>



    </div>
  </div>
</div>

<hr>

<script src="/promotion/promotion.js"></script>



<footer class="d-print-none">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center social-buttons">
                    <li class="list-inline-item">
                        <a class="main-btn" href="/feed.xml" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="RSS">
                            <i class="fa fa-rss fa-lg"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="main-btn" href="https://www.linkedin.com/in/marcin-lasota/" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="LinkedIn">
                            <i class="fa fa-linkedin-square" aria-hidden="true"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="main-btn" href="https://github.com/C0deboy" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="Github">
                            <i class="fa fa-github fa-lg"></i>
                        </a>
                    </li>
                    <li class="list-inline-item">
                        <a class="main-btn" href="mailto:lasota.marcinm@gmail.com" data-toggle="tooltip" data-animation="zoom" data-delay="50" title="lasota.marcinm@gmail.com">
                            <i class="fa fa-envelope fa-lg"></i>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright <i class="fa fa-copyright" aria-hidden="true"></i> devcave 2017 - 2019</p>
            </div>
        </div>
    </div>
</footer>

<script src="/dist/js/devcave.min.js"></script>




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90973428-2', 'auto');
  ga('send', 'pageview');

</script>




</body>

</html>
